http://www.ece.ubc.ca/~edc/7660.jan2018/

本文主要讲述怎么样使用静态时序分析来确保数字设计中遇到的时序约束。经过本文你应该会了解讲座中定义的术语，通过带delay注释的原理图学会计算建立时间和保持时间。

## 介绍

时钟信号以及信号的建立和保持在规格中需要进行时序约束。满足这些时序约束通常与确保设计上逻辑正确一样困难。

可靠的操作要求设计人员正确指定时序约束并修改设计直到满足约束。

## 传播延时（Propagation Delays）

传播延时，t~PD~，指从组合逻辑电路输入端改变到输出端改变的延时。

时钟到输出延时，t~CO~，指从触发器时钟输入上升沿到触发器Q端输出改变的延时。

![image-20210321145522308](Static Timing Analysis.assets/image-20210321145522308.png)

这些延时是需要对相互连接的晶体管间的寄生电容充电的引起的。

上述时序框图中的平行线表明信号维持再高电平或低电平，交叉线表明信号改变。

## 亚稳态，建立和保持时间（Metastability，Setup and Hold Times）

通常认为以下边沿触发的D触发器为实现：

![image-20210321150800375](Static Timing Analysis.assets/image-20210321150800375.png)

当时钟输入为“0”时，第一个多路复用器的输出跟随输入——这个锁存器是“透明的”。当时钟输入为“1”时，第一个多路复用器的输出级反馈到输入端并维持那个电平。

这是一个”master-slave“触发器；当时钟为0时，第二个，”slave”锁存器维持前面一个锁存器的值。

当时钟从0到1变化时，如果锁存器的输出端为逻辑阈值电压，那么多路复用器可能无法决定反馈的信号为0还是为1。多路复用器的输出会维持在一个不确的电平，并且时间比t~CO~ 长得多。这种行为被叫做“亚稳态”，并可能导致电路工作不可靠。

![image-20210321152828281](Static Timing Analysis.assets/image-20210321152828281.png)

为了避免亚稳态，必须确保锁存器输入电压维持足够长时间的有效电平，以便于驱动锁存器输出端为有效电平。这段需要的时间就被称为“setup”时间，t~SU~ 。

输入电平必须维持在一个正确的电平，指导多路复用器已经完全切换。这段时间通常室间隔短的多的时间——一般为0，这段时间被称为”hold“时间，t~H~。

## 同步设计（Synchronous Design）

为了避免亚稳态产生，几乎所有的数字电路设计都是“同步的”。这些电路设计由边沿触发的触发器和在这些触发器之间的组合逻辑电路组成。

![image-20210321154354506](Static Timing Analysis.assets/image-20210321154354506.png)

通过这些确定组合逻辑的传输延时可以满足建立和保持时间的需求，我们可以避免出现亚稳态的产生。

下面的时序图表明了每个触发器时钟边沿与输入输出有效时间的关系。

![image-20210321155026306](Static Timing Analysis.assets/image-20210321155026306.png)

途中的 launch edge 和latch edge 怎么理解？

Q段在时钟上升沿后的t~CO~ 后时间内改变。

t~PD~ 时间之后，右边触发器的D输入将会输入一个有效的（正确的）逻辑电平。这至少要维持t~SU~ 时间指导时钟的下一个上升沿到来。这个电平在改变之前也必须要维持至少t~H~  时间。

上图确定了两个时钟边沿，即“launch”和“latch”边沿。在本例中时钟边沿时由稳定的时钟周期区分。然而，由于相互间的延时不同，时钟边沿可能在不同的时间到来。这就被称为“时钟歪斜 clock skew”。两个时钟的频率也可能不同或在下降沿锁存。

